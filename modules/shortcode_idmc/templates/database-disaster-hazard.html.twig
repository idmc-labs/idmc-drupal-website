{{ attach_library('shortcode_idmc/amchart-lib') }}
<script type="text/javascript" src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/serial.js"></script>

<!-- amCharts plugins -->
<script type="text/javascript" src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
<script type="text/javascript" src="https://www.amcharts.com/lib/3/plugins/dataloader/dataloader.min.js" type="text/javascript"></script>
<script src="https://www.amcharts.com/lib/3/plugins/responsive/responsive.min.js"></script>
<link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css">

<!-- amCharts javascript code -->
<script type="text/javascript">
    var chartdivid = '{{ chartdivid }}'

    var chart = AmCharts.makeChart(chartdivid, {
        "type": "serial",
        "categoryField": "year",
        "startDuration": 1,
        "export": {
            "enabled": true
        },
        "responsive": {
            "enabled": true
          },
        "categoryAxis": {
            "autoRotateAngle": 0,
            "gridPosition": "start",
            "tickPosition": "start",
            "axisColor": "#929696",
            "gridColor": "#FFFFFF",
            "labelRotation": 90
        },
        "chartCursor": {
            "enabled": true,
            "animationDuration": 0.61,
            "categoryBalloonEnabled": false,
            "cursorAlpha": 0.01
        },
        "trendLines": [],
        "graphs": [
            {
                "balloonText": "<b>[[title]]:</b> <span style='font-weight:normal;'>[[value]]</span>",
                "fillAlphas": 1,
                "fillColors": "#FAC45A",
                "id": "AmGraph-1",
                "lineThickness": 1,
                "lineColor": "#FAC45A",
                "title": "Geophysical",
                "type": "column",
                "valueField": "geophysical",
            },
            {
                "balloonText": "<b>[[title]]:</b> <span style='font-weight:normal;'>[[value]]</span>",
                "fillAlphas": 1,
                "fillColors": "#218FC4",
                "id": "AmGraph-2",
                "lineThickness": 1,
                "lineColor": "#218FC4",
                "title": "Weather related",
                "type": "column",
                "valueField": "weather_related",
            }
        ],
        "guides": [],
        "valueAxes": [
            {
                "id": "ValueAxis-1",
                "stackType": "regular",
                "autoGridCount": false,
                "axisColor": "#929696",
                "gridCount": 10,
                "title": "MILLIONS",
                "totalText": "[[total]]"
            }
        ],
        "allLabels": [],
        "balloon": {},
        "legend": {
            "enabled": true,
            "useGraphSettings": true,
            "valueText": ""
        },
        "titles": [
            {
                "id": "Title-1",
                "size": 15,
                "text": ""
            }
        ],
        "dataLoader": {
            "url": "https://api.idmcdb.org/public/assets/data/static_displacement_by_hazard_category.json",
            "format": "json",
            "postProcess": function (data, config, chart) {
                return data.results;
            }
        },
    });
</script>

<div id="{{ chartdivid }}" style="width: 100%; height: 600px; background-color: #FFFFFF;" ></div>
